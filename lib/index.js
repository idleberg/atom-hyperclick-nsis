"use strict";var e=require("fs"),n=require("path"),a=require("os"),i="hyperclick-nsis",t=i,s={schema:{pathToMakensis:{title:"Path to MakeNSIS",description:"Specify the full path to `makensis`",type:"string",default:"makensis",order:1},manageDependencies:{title:"Manage Dependencies",description:"When enabled, third-party dependencies will be installed automatically",type:"boolean",default:!0,order:2}},get:(e="")=>e?.length?atom.config.get(`${i}.${e}`):atom.config.get(`${i}`),migrate(e,n){if(atom.config.get(`${i}.${e}`)&&!atom.config.get(`${i}.${n}`)){try{atom.config.set(`${i}.${n}`,atom.config.get(`${i}.${e}`))}catch(e){return void atom.notifications.addWarning("Failed to migrate configuration, see console for details")}atom.config.unset(`${i}.${e}`)}},unset(e=""){const n=e?.length?`${i}.${e}`:i;atom.config.unset(n)},async open(e={}){e={pending:!0,searchAllPanes:!0,...e},await atom.workspace.open(`atom://config/packages/${i}`,e)}};const r=/(?:!include|LoadLanguageFile)\s+(?:"([^"]+)"|'([^']+)'|([^\r?\n]+$))/,o=["Colors.nsh","FileFunc.nsh","InstallOptions.nsh","LangFile.nsh","Library.nsh","LogicLib.nsh","Memento.nsh","MUI.nsh","MUI2.nsh","MultiUser.nsh","nsDialogs.nsh","Sections.nsh","StrFunc.nsh","TextFunc.nsh","UpgradeDLL.nsh","Util.nsh","VB6RunTime.nsh","VPatchLib.nsh","WinCore.nsh","WinMessages.nsh","WinVer.nsh","WordFunc.nsh","x64.nsh"],c=["Afrikaans","Albanian","Arabic","Armenian","Asturian","Basque","Belarusian","Bosnian","Breton","Bulgarian","Catalan","Corsican","Croatian","Czech","Danish","Dutch","English","Esperanto","Estonian","Farsi","Finnish","French","Galician","Georgian","German","Greek","Hebrew","Hungarian","Icelandic","Indonesian","Irish","Italian","Japanese","Korean","Kurdish","Latvian","Lithuanian","Luxembourgish","Macedonian","Malay","Mongolian","Norwegian","NorwegianNynorsk","Pashto","Polish","Portuguese","PortugueseBR","Romanian","Russian","ScotsGaelic","Serbian","SerbianLatin","SimpChinese","Slovak","Slovenian","Spanish","SpanishInternational","Swedish","Tatar","Thai","TradChinese","Turkish","Ukrainian","Uzbek","Vietnamese","Welsh"];async function l(e,t){const{nsisDir:r}=await Promise.resolve().then((function(){return require("./makensis-35bc828a.js")})).then((function(e){return e.makensis})),l=s.get(`${i}.pathToMakensis`),h=l&&l.trim().length?{pathToMakensis:l}:{};let g;try{g=await r(h)}catch(e){return console.error(e),void atom.notifications.addError(`${i}`,{detail:"`makensis.exe` is not in your PATH [environmental variable](http://superuser.com/a/284351/195953)",dismissable:!0})}t.includes("${NSISDIR}")&&("win32"!==a.platform()&&t.includes("\\")&&(t=t.replace(/\\/g,"/")),t=t.replace(/\${NSISDIR}/gi,g));let u,{dir:d}=n.parse(e),{dir:m,ext:p,name:f}=n.parse(t);u=n.isAbsolute(m)?n.join(m,f+p):o.indexOf(f+p)?n.join(g,"Include",f+p):c.indexOf(f)?n.join(g,"Contrib/Language files",f+p):n.join(d,m,f+p);return[u]}var h={config:s.schema,async activate(){if(!0===atom.config.get(`${t}.manageDependencies`)){const{satisfyDependencies:e}=await Promise.resolve().then((function(){return require("./index-dbdd384b.js")})).then((function(e){return e.index}));e("hyperclick-nsis")}},getProvider:()=>({priority:1,grammarScopes:["source.nsis","source.nsis.bridle"],getSuggestionForWord(n,a,t){const{targetRange:s,targetFile:o}=((e,n)=>{const a=[[n.start.row,0],[n.end.row+1,0]];let i=null,t=null;return e.scanInBufferRange(r,a,(e=>{t=e.match[1]||e.match[2]||e.match[3],i=e.range,e.stop()})),{targetFile:t,targetRange:i}})(n,t);if(s&&o)return{range:s,async callback(){let a,t;try{t=await l(n.getPath(),o),a=await t.find((async n=>await e.promises.access(n,e.constants.F_OK)))}catch(e){return console.error(e),function(){const e=atom.notifications.addWarning(`${i}`,{detail:"Unable detect path for unsaved file. Please save this file and try again.",dismissable:!0,buttons:[{text:"Save Asâ€¦",onDidClick:()=>{e.dismiss();const n=atom.workspace.getActiveTextEditor(),a=atom.views.getView(n);atom.commands.dispatch(a,"core:save-as")}},{text:"Cancel",onDidClick:()=>{e.dismiss()}}]})}()}if(a)return a=await e.promises.realpath(a),atom.workspace.open(a);atom.beep()}}}})};module.exports=h;
//# sourceMappingURL=index.js.map
